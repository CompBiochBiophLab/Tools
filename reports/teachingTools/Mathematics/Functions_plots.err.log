Traceback (most recent call last):
  File "/home/jordivilla/miniconda3/lib/python3.10/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/home/jordivilla/miniconda3/lib/python3.10/site-packages/nbclient/client.py", line 1305, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/home/jordivilla/miniconda3/lib/python3.10/site-packages/jupyter_core/utils/__init__.py", line 166, in wrapped
    return loop.run_until_complete(inner)
  File "/home/jordivilla/miniconda3/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/jordivilla/miniconda3/lib/python3.10/site-packages/nbclient/client.py", line 705, in async_execute
    await self.async_execute_cell(
  File "/home/jordivilla/miniconda3/lib/python3.10/site-packages/nbclient/client.py", line 1058, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/home/jordivilla/miniconda3/lib/python3.10/site-packages/nbclient/client.py", line 914, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# transformaciÃ³ afÃ­ d'un polÃ­gon a R2 fent servir notaciÃ³ homogÃ¨nia

import matplotlib.pyplot as plt
import numpy as np
import math
np.set_printoptions(formatter={'float': lambda x: 'float: ' + str(x)})

def printMatrix(A,a):
    print('matrix '+A)
    for line in a:
        print ('  '.join(map(str, line)))
        
def centroid(arr):                # faig el centroide del polÃ­gon. Cal fixar-se que aquest tÃ© un punt mÃ©s del desitjat per al cÃ lcul
    length = arr.shape[1]-1
    sum_x = np.sum(arr[0,:-1])
    sum_y = np.sum(arr[1,:-1])
    print('-----',arr,arr[:,0],arr[:,1],length,sum_x,sum_y,'------')
    C = np.array([sum_x/length,sum_y/length])
    return C

def transformacioAfiHom(A,P1orig,P1transf,nom):   #uso dos P1, per si cal dibuixar l'original
    P1=P1transf           #el que usarÃ© per als cÃ lculs
    columns = P1.shape[1]
    rows = P1.shape[0]

    # aplico la transformada afÃ­
    P2=A.dot(P1)
    for j in range(columns):
        P2[:,j] = P2[:,j]

    # setting the axes at the centre
    fig = plt.figure(figsize=(10,10))

    ax = fig.add_subplot(1, 1, 1)
    ax.spines['left'].set_position('zero')
    ax.spines['bottom'].set_position('zero')
    ax.spines['right'].set_color('none')
    ax.spines['top'].set_color('none')
    ax.xaxis.set_ticks_position('bottom')
    ax.yaxis.set_ticks_position('left')
    plt.xticks(fontsize=20)
    plt.yticks(fontsize=20)
    plt.grid(True)

    # dibuixo els polÃ­gons
    plt.plot(P1orig[0,:],P1orig[1,:], 'o')
    plt.plot(P2[0,:],P2[1,:], 'o')
    plt.fill(P1orig[0,:],P1orig[1,:])
    plt.fill(P2[0,:],P2[1,:],hatch="X",color="none",edgecolor="b")

    # dibuixo els vectors que han generat el desplaÃ§ament dels punts
    for i in range(columns):
        ax.arrow(P1orig[0,i],P1orig[1,i],P2[0,i]-P1orig[0,i],P2[1,i]-P1orig[1,i], 
                 head_width=0.5, head_length=0.5, linewidth=3, length_includes_head=True,
                 fc='k', ec='k')

    # show the plot

    plt.savefig(nom+'.png',dpi=100)
    plt.show()
    return(P2)

# el polÃ­gon a transformar tÃ© un nombre de vÃ¨rtex n. L'array que genero repeteix el primer
# vÃ¨rtex en la darrera posiciÃ³ per tal de poder fer un plt.fill al fer el grÃ fic
P1 = np.array([[2,0,4,0,2],[6,6,4,4,6],[1,1,1,1,1]])
#######################################
# TRANSFORMACIONS AFINS ELEMENTALS
#######################################

a11=0
a12=1
b1=-10
a21=2
a22=1
b2=-10
A = np.array([[a11, a12,b1],[a21,a22,b2],[0,0,1]]); nom='../quizes/figures/transafiHom'# generic example
P2=transformacioAfiHom(A,P1,P1,nom)
printMatrix('A',A)
printMatrix('P1',P1)
printMatrix('P2',P2)


------------------


[0;31m---------------------------------------------------------------------------[0m
[0;31mFileNotFoundError[0m                         Traceback (most recent call last)
Cell [0;32mIn[3], line 77[0m
[1;32m     75[0m b2[38;5;241m=[39m[38;5;241m-[39m[38;5;241m10[39m
[1;32m     76[0m A [38;5;241m=[39m np[38;5;241m.[39marray([[a11, a12,b1],[a21,a22,b2],[[38;5;241m0[39m,[38;5;241m0[39m,[38;5;241m1[39m]]); nom[38;5;241m=[39m[38;5;124m'[39m[38;5;124m../quizes/figures/transafiHom[39m[38;5;124m'[39m[38;5;66;03m# generic example[39;00m
[0;32m---> 77[0m P2[38;5;241m=[39m[43mtransformacioAfiHom[49m[43m([49m[43mA[49m[43m,[49m[43mP1[49m[43m,[49m[43mP1[49m[43m,[49m[43mnom[49m[43m)[49m
[1;32m     78[0m printMatrix([38;5;124m'[39m[38;5;124mA[39m[38;5;124m'[39m,A)
[1;32m     79[0m printMatrix([38;5;124m'[39m[38;5;124mP1[39m[38;5;124m'[39m,P1)

Cell [0;32mIn[3], line 59[0m, in [0;36mtransformacioAfiHom[0;34m(A, P1orig, P1transf, nom)[0m
[1;32m     53[0m     ax[38;5;241m.[39marrow(P1orig[[38;5;241m0[39m,i],P1orig[[38;5;241m1[39m,i],P2[[38;5;241m0[39m,i][38;5;241m-[39mP1orig[[38;5;241m0[39m,i],P2[[38;5;241m1[39m,i][38;5;241m-[39mP1orig[[38;5;241m1[39m,i], 
[1;32m     54[0m              head_width[38;5;241m=[39m[38;5;241m0.5[39m, head_length[38;5;241m=[39m[38;5;241m0.5[39m, linewidth[38;5;241m=[39m[38;5;241m3[39m, length_includes_head[38;5;241m=[39m[38;5;28;01mTrue[39;00m,
[1;32m     55[0m              fc[38;5;241m=[39m[38;5;124m'[39m[38;5;124mk[39m[38;5;124m'[39m, ec[38;5;241m=[39m[38;5;124m'[39m[38;5;124mk[39m[38;5;124m'[39m)
[1;32m     57[0m [38;5;66;03m# show the plot[39;00m
[0;32m---> 59[0m [43mplt[49m[38;5;241;43m.[39;49m[43msavefig[49m[43m([49m[43mnom[49m[38;5;241;43m+[39;49m[38;5;124;43m'[39;49m[38;5;124;43m.png[39;49m[38;5;124;43m'[39;49m[43m,[49m[43mdpi[49m[38;5;241;43m=[39;49m[38;5;241;43m100[39;49m[43m)[49m
[1;32m     60[0m plt[38;5;241m.[39mshow()
[1;32m     61[0m [38;5;28;01mreturn[39;00m(P2)

File [0;32m~/miniconda3/lib/python3.10/site-packages/matplotlib/pyplot.py:1023[0m, in [0;36msavefig[0;34m(*args, **kwargs)[0m
[1;32m   1020[0m [38;5;129m@_copy_docstring_and_deprecators[39m(Figure[38;5;241m.[39msavefig)
[1;32m   1021[0m [38;5;28;01mdef[39;00m [38;5;21msavefig[39m([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs):
[1;32m   1022[0m     fig [38;5;241m=[39m gcf()
[0;32m-> 1023[0m     res [38;5;241m=[39m [43mfig[49m[38;5;241;43m.[39;49m[43msavefig[49m[43m([49m[38;5;241;43m*[39;49m[43margs[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m
[1;32m   1024[0m     fig[38;5;241m.[39mcanvas[38;5;241m.[39mdraw_idle()  [38;5;66;03m# Need this if 'transparent=True', to reset colors.[39;00m
[1;32m   1025[0m     [38;5;28;01mreturn[39;00m res

File [0;32m~/miniconda3/lib/python3.10/site-packages/matplotlib/figure.py:3343[0m, in [0;36mFigure.savefig[0;34m(self, fname, transparent, **kwargs)[0m
[1;32m   3339[0m     [38;5;28;01mfor[39;00m ax [38;5;129;01min[39;00m [38;5;28mself[39m[38;5;241m.[39maxes:
[1;32m   3340[0m         stack[38;5;241m.[39menter_context(
[1;32m   3341[0m             ax[38;5;241m.[39mpatch[38;5;241m.[39m_cm_set(facecolor[38;5;241m=[39m[38;5;124m'[39m[38;5;124mnone[39m[38;5;124m'[39m, edgecolor[38;5;241m=[39m[38;5;124m'[39m[38;5;124mnone[39m[38;5;124m'[39m))
[0;32m-> 3343[0m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mcanvas[49m[38;5;241;43m.[39;49m[43mprint_figure[49m[43m([49m[43mfname[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m

File [0;32m~/miniconda3/lib/python3.10/site-packages/matplotlib/backend_bases.py:2366[0m, in [0;36mFigureCanvasBase.print_figure[0;34m(self, filename, dpi, facecolor, edgecolor, orientation, format, bbox_inches, pad_inches, bbox_extra_artists, backend, **kwargs)[0m
[1;32m   2362[0m [38;5;28;01mtry[39;00m:
[1;32m   2363[0m     [38;5;66;03m# _get_renderer may change the figure dpi (as vector formats[39;00m
[1;32m   2364[0m     [38;5;66;03m# force the figure dpi to 72), so we need to set it again here.[39;00m
[1;32m   2365[0m     [38;5;28;01mwith[39;00m cbook[38;5;241m.[39m_setattr_cm([38;5;28mself[39m[38;5;241m.[39mfigure, dpi[38;5;241m=[39mdpi):
[0;32m-> 2366[0m         result [38;5;241m=[39m [43mprint_method[49m[43m([49m
[1;32m   2367[0m [43m            [49m[43mfilename[49m[43m,[49m
[1;32m   2368[0m [43m            [49m[43mfacecolor[49m[38;5;241;43m=[39;49m[43mfacecolor[49m[43m,[49m
[1;32m   2369[0m [43m            [49m[43medgecolor[49m[38;5;241;43m=[39;49m[43medgecolor[49m[43m,[49m
[1;32m   2370[0m [43m            [49m[43morientation[49m[38;5;241;43m=[39;49m[43morientation[49m[43m,[49m
[1;32m   2371[0m [43m            [49m[43mbbox_inches_restore[49m[38;5;241;43m=[39;49m[43m_bbox_inches_restore[49m[43m,[49m
[1;32m   2372[0m [43m            [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m
[1;32m   2373[0m [38;5;28;01mfinally[39;00m:
[1;32m   2374[0m     [38;5;28;01mif[39;00m bbox_inches [38;5;129;01mand[39;00m restore_bbox:

File [0;32m~/miniconda3/lib/python3.10/site-packages/matplotlib/backend_bases.py:2232[0m, in [0;36mFigureCanvasBase._switch_canvas_and_return_print_method.<locals>.<lambda>[0;34m(*args, **kwargs)[0m
[1;32m   2228[0m     optional_kws [38;5;241m=[39m {  [38;5;66;03m# Passed by print_figure for other renderers.[39;00m
[1;32m   2229[0m         [38;5;124m"[39m[38;5;124mdpi[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124mfacecolor[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124medgecolor[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124morientation[39m[38;5;124m"[39m,
[1;32m   2230[0m         [38;5;124m"[39m[38;5;124mbbox_inches_restore[39m[38;5;124m"[39m}
[1;32m   2231[0m     skip [38;5;241m=[39m optional_kws [38;5;241m-[39m {[38;5;241m*[39minspect[38;5;241m.[39msignature(meth)[38;5;241m.[39mparameters}
[0;32m-> 2232[0m     print_method [38;5;241m=[39m functools[38;5;241m.[39mwraps(meth)([38;5;28;01mlambda[39;00m [38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs: [43mmeth[49m[43m([49m
[1;32m   2233[0m [43m        [49m[38;5;241;43m*[39;49m[43margs[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43m{[49m[43mk[49m[43m:[49m[43m [49m[43mv[49m[43m [49m[38;5;28;43;01mfor[39;49;00m[43m [49m[43mk[49m[43m,[49m[43m [49m[43mv[49m[43m [49m[38;5;129;43;01min[39;49;00m[43m [49m[43mkwargs[49m[38;5;241;43m.[39;49m[43mitems[49m[43m([49m[43m)[49m[43m [49m[38;5;28;43;01mif[39;49;00m[43m [49m[43mk[49m[43m [49m[38;5;129;43;01mnot[39;49;00m[43m [49m[38;5;129;43;01min[39;49;00m[43m [49m[43mskip[49m[43m}[49m[43m)[49m)
[1;32m   2234[0m [38;5;28;01melse[39;00m:  [38;5;66;03m# Let third-parties do as they see fit.[39;00m
[1;32m   2235[0m     print_method [38;5;241m=[39m meth

File [0;32m~/miniconda3/lib/python3.10/site-packages/matplotlib/backends/backend_agg.py:509[0m, in [0;36mFigureCanvasAgg.print_png[0;34m(self, filename_or_obj, metadata, pil_kwargs)[0m
[1;32m    462[0m [38;5;28;01mdef[39;00m [38;5;21mprint_png[39m([38;5;28mself[39m, filename_or_obj, [38;5;241m*[39m, metadata[38;5;241m=[39m[38;5;28;01mNone[39;00m, pil_kwargs[38;5;241m=[39m[38;5;28;01mNone[39;00m):
[1;32m    463[0m [38;5;250m    [39m[38;5;124;03m"""[39;00m
[1;32m    464[0m [38;5;124;03m    Write the figure to a PNG file.[39;00m
[1;32m    465[0m 
[0;32m   (...)[0m
[1;32m    507[0m [38;5;124;03m        *metadata*, including the default 'Software' key.[39;00m
[1;32m    508[0m [38;5;124;03m    """[39;00m
[0;32m--> 509[0m     [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_print_pil[49m[43m([49m[43mfilename_or_obj[49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mpng[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[43mpil_kwargs[49m[43m,[49m[43m [49m[43mmetadata[49m[43m)[49m

File [0;32m~/miniconda3/lib/python3.10/site-packages/matplotlib/backends/backend_agg.py:458[0m, in [0;36mFigureCanvasAgg._print_pil[0;34m(self, filename_or_obj, fmt, pil_kwargs, metadata)[0m
[1;32m    453[0m [38;5;250m[39m[38;5;124;03m"""[39;00m
[1;32m    454[0m [38;5;124;03mDraw the canvas, then save it using `.image.imsave` (to which[39;00m
[1;32m    455[0m [38;5;124;03m*pil_kwargs* and *metadata* are forwarded).[39;00m
[1;32m    456[0m [38;5;124;03m"""[39;00m
[1;32m    457[0m FigureCanvasAgg[38;5;241m.[39mdraw([38;5;28mself[39m)
[0;32m--> 458[0m [43mmpl[49m[38;5;241;43m.[39;49m[43mimage[49m[38;5;241;43m.[39;49m[43mimsave[49m[43m([49m
[1;32m    459[0m [43m    [49m[43mfilename_or_obj[49m[43m,[49m[43m [49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mbuffer_rgba[49m[43m([49m[43m)[49m[43m,[49m[43m [49m[38;5;28;43mformat[39;49m[38;5;241;43m=[39;49m[43mfmt[49m[43m,[49m[43m [49m[43morigin[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mupper[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m    460[0m [43m    [49m[43mdpi[49m[38;5;241;43m=[39;49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mfigure[49m[38;5;241;43m.[39;49m[43mdpi[49m[43m,[49m[43m [49m[43mmetadata[49m[38;5;241;43m=[39;49m[43mmetadata[49m[43m,[49m[43m [49m[43mpil_kwargs[49m[38;5;241;43m=[39;49m[43mpil_kwargs[49m[43m)[49m

File [0;32m~/miniconda3/lib/python3.10/site-packages/matplotlib/image.py:1689[0m, in [0;36mimsave[0;34m(fname, arr, vmin, vmax, cmap, format, origin, dpi, metadata, pil_kwargs)[0m
[1;32m   1687[0m pil_kwargs[38;5;241m.[39msetdefault([38;5;124m"[39m[38;5;124mformat[39m[38;5;124m"[39m, [38;5;28mformat[39m)
[1;32m   1688[0m pil_kwargs[38;5;241m.[39msetdefault([38;5;124m"[39m[38;5;124mdpi[39m[38;5;124m"[39m, (dpi, dpi))
[0;32m-> 1689[0m [43mimage[49m[38;5;241;43m.[39;49m[43msave[49m[43m([49m[43mfname[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mpil_kwargs[49m[43m)[49m

File [0;32m~/miniconda3/lib/python3.10/site-packages/PIL/Image.py:2428[0m, in [0;36mImage.save[0;34m(self, fp, format, **params)[0m
[1;32m   2426[0m         fp [38;5;241m=[39m builtins[38;5;241m.[39mopen(filename, [38;5;124m"[39m[38;5;124mr+b[39m[38;5;124m"[39m)
[1;32m   2427[0m     [38;5;28;01melse[39;00m:
[0;32m-> 2428[0m         fp [38;5;241m=[39m [43mbuiltins[49m[38;5;241;43m.[39;49m[43mopen[49m[43m([49m[43mfilename[49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mw+b[39;49m[38;5;124;43m"[39;49m[43m)[49m
[1;32m   2430[0m [38;5;28;01mtry[39;00m:
[1;32m   2431[0m     save_handler([38;5;28mself[39m, fp, filename)

[0;31mFileNotFoundError[0m: [Errno 2] No such file or directory: '../quizes/figures/transafiHom.png'

